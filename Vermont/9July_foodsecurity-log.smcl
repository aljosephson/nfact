{smcl}
{txt}{sf}{ul off}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\aljosephson\Dropbox\COVID\UVM/9July_foodsecurity-log.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res} 9 Jul 2020, 11:48:13
{txt}
{com}. 
. * read in excel 
.         clear
{txt}
{com}.         import          excel "C:\Users\aljosephson\Dropbox\COVID\UVM\data_clean_joinT1andT2_0617_deidentified.xlsx", sheet("data_clean_joinT1andT2_0617") firstrow
{res}{text}(487 vars, 1,236 obs)

{com}.         
. * save into two files to create long data set   
.         keep            A UNIQUE_ID *_T1
{txt}
{com}.         rename          *_T1 *
{res}{txt}
{com}.         gen             period = 1
{txt}
{com}.         save            "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_T1_9July.dta", replace
{txt}file C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_T1_9July.dta saved

{com}.         
.         clear
{txt}
{com}.         import          excel "C:\Users\aljosephson\Dropbox\COVID\UVM\data_clean_joinT1andT2_0617_deidentified.xlsx", sheet("data_clean_joinT1andT2_0617") firstrow
{res}{text}(487 vars, 1,236 obs)

{com}.         keep            A UNIQUE_ID *_T2
{txt}
{com}.         rename          *_T2 *
{res}{txt}
{com}.         gen             period = 2
{txt}
{com}.         save            "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_T2_9July.dta", replace
{txt}file C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_T2_9July.dta saved

{com}. 
. * append together       
.         use             "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_T1_9July.dta", clear
{txt}
{com}.         append          using "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_T2_9July.dta", force
{txt}{p 0 7 2}
(note: variable
helpful_extraamount was double in the using data, but will be
str526 now)
{p_end}
{p 0 7 2}
(note: variable
income was str19 in the using data, but will be
byte now)
{p_end}
{p 0 7 2}
(note: variable
challenge_txt_close was 
str313, now str385 to accommodate using data's values)
{p_end}
{p 0 7 2}
(note: variable
strat_othertxt_cur was 
str350, now str488 to accommodate using data's values)
{p_end}
{p 0 7 2}
(note: variable
strat_othertxt_fut was 
str217, now str707 to accommodate using data's values)
{p_end}
{p 0 7 2}
(note: variable
other_comments was 
str1770, now strL to accommodate using data's values)
{p_end}

{com}.         
.         rename          UNIQUE_ID id
{res}{txt}
{com}.         rename          A idobs
{res}{txt}
{com}. 
.         save            "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_9July.dta"
{err}{p 0 4 2}
file C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_9July.dta
already exists
{p_end}
{txt}{search r(602), local:r(602);}

end of do-file

{search r(602), local:r(602);}

{com}. do "C:\Users\ALJOSE~1\AppData\Local\Temp\STD4d90_000000.tmp"
{txt}
{com}. * Project: UVM 
. * Created on: July 2020
. * Created by: alj
. * Stata v.16
. 
. * does
.         * cleans UVM two ways: long, wide (saves files)
.         * inspects food security variables 
.         * attrition basic analysis on food security variables 
. 
. * assumes
.         * standard - Stata v.16
.         
. * TO DO:
.         * adjust directiories for universal use - right now set to alj 
.         * adjust labels in wide data set - too long currently 
. 
. * **********************************************************************
. * 0 - setup
. * **********************************************************************
. 
. * open log
.         cap             log close
{smcl}
{com}{sf}{ul off}{smcl}
{com}{sf}{ul off}{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\aljosephson\Dropbox\COVID\UVM/9July_foodsecurity-log.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res} 9 Jul 2020, 11:50:36
{txt}
{com}. 
. * read in excel 
.         clear
{txt}
{com}.         import          excel "C:\Users\aljosephson\Dropbox\COVID\UVM\data_clean_joinT1andT2_0617_deidentified.xlsx", sheet("data_clean_joinT1andT2_0617") firstrow
{res}{text}(487 vars, 1,236 obs)

{com}.         
. * save into two files to create long data set   
.         keep            A UNIQUE_ID *_T1
{txt}
{com}.         rename          *_T1 *
{res}{txt}
{com}.         gen             period = 1
{txt}
{com}.         save            "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_T1_9July.dta", replace
{txt}file C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_T1_9July.dta saved

{com}.         
.         clear
{txt}
{com}.         import          excel "C:\Users\aljosephson\Dropbox\COVID\UVM\data_clean_joinT1andT2_0617_deidentified.xlsx", sheet("data_clean_joinT1andT2_0617") firstrow
{res}{text}(487 vars, 1,236 obs)

{com}.         keep            A UNIQUE_ID *_T2
{txt}
{com}.         rename          *_T2 *
{res}{txt}
{com}.         gen             period = 2
{txt}
{com}.         save            "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_T2_9July.dta", replace
{txt}file C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_T2_9July.dta saved

{com}. 
. * append together       
.         use             "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_T1_9July.dta", clear
{txt}
{com}.         append          using "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_T2_9July.dta", force
{txt}{p 0 7 2}
(note: variable
helpful_extraamount was double in the using data, but will be
str526 now)
{p_end}
{p 0 7 2}
(note: variable
income was str19 in the using data, but will be
byte now)
{p_end}
{p 0 7 2}
(note: variable
challenge_txt_close was 
str313, now str385 to accommodate using data's values)
{p_end}
{p 0 7 2}
(note: variable
strat_othertxt_cur was 
str350, now str488 to accommodate using data's values)
{p_end}
{p 0 7 2}
(note: variable
strat_othertxt_fut was 
str217, now str707 to accommodate using data's values)
{p_end}
{p 0 7 2}
(note: variable
other_comments was 
str1770, now strL to accommodate using data's values)
{p_end}

{com}.         
.         rename          UNIQUE_ID id
{res}{txt}
{com}.         rename          A idobs
{res}{txt}
{com}. 
.         save            "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_9July.dta", replace 
{txt}file C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_9July.dta saved

{com}.         *** this is the "long" dataset where T1 and T2 are stacked 
. 
. * **********************************************************************
. * 1 - food security variables (long)
. * **********************************************************************
. 
. * looking at food security variables
. * using long data set                   
. 
. * create variables to compare year and last 30  
. * non - binary variable: food_sec_year food_sec_last30          
.         gen             food_sec_comp_year30 = . 
{txt}(2,472 missing values generated)

{com}.         replace         food_sec_comp_year30 = food_sec_year if period == 1
{txt}(1,215 real changes made)

{com}.         replace         food_sec_comp_year30 = food_sec_last30 if period == 2
{txt}(1,235 real changes made)

{com}.         tab             food_sec_comp_year30

{txt}food_sec_co {c |}
  mp_year30 {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}      1,794       73.22       73.22
{txt}          1 {c |}{res}        214        8.73       81.96
{txt}          2 {c |}{res}        109        4.45       86.41
{txt}          3 {c |}{res}         68        2.78       89.18
{txt}          4 {c |}{res}         59        2.41       91.59
{txt}          5 {c |}{res}         64        2.61       94.20
{txt}          6 {c |}{res}        142        5.80      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      2,450      100.00
{txt}
{com}.         ranksum         food_sec_comp_year30, by (period)

{txt}Two-sample Wilcoxon rank-sum (Mann-Whitney) test

      period {c |}      obs    rank sum    expected
{hline 13}{c +}{hline 33}
           1 {c |}{res}{col 17}   1215{col 26} 1479641.5{col 38} 1488982.5
           {txt}2 {c |}{res}{col 17}   1235{col 26} 1522833.5{col 38} 1513492.5
{txt}{hline 13}{c +}{hline 33}
    combined {c |}{res}{col 17}   2450{col 26}   3002475{col 38}   3002475

{txt}unadjusted variance{col 22}{res} 3.065e+08
{txt}adjustment for ties{col 22}{res}-1.206e+08
{txt}{col 22}{hline 10}
adjusted variance{col 22}{res} 1.858e+08

{txt}Ho: food~r30(period==1) = food~r30(period==2)
{col 14}z = {res} -0.685
{txt}{col 5}Prob > |z| = {res}  0.4932
{txt}
{com}.         *** not statistically different
.         *** z =  -0.685, Prob > |z| =   0.4932
. 
. * create variables to compare covid and last 30
. * non - binary variable: food_sec_covid food_sec_last30 
.         gen             food_sec_comp_covid30 = .
{txt}(2,472 missing values generated)

{com}.         replace         food_sec_comp_covid30 = food_sec_covid if period == 1
{txt}(1,195 real changes made)

{com}.         replace         food_sec_comp_covid30 = food_sec_last30 if period == 2
{txt}(1,235 real changes made)

{com}.         tab             food_sec_comp_covid30

{txt}food_sec_co {c |}
 mp_covid30 {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}      1,697       69.84       69.84
{txt}          1 {c |}{res}        205        8.44       78.27
{txt}          2 {c |}{res}        125        5.14       83.42
{txt}          3 {c |}{res}         87        3.58       87.00
{txt}          4 {c |}{res}         63        2.59       89.59
{txt}          5 {c |}{res}         87        3.58       93.17
{txt}          6 {c |}{res}        166        6.83      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      2,430      100.00
{txt}
{com}.         ranksum         food_sec_comp_covid30, by (period)

{txt}Two-sample Wilcoxon rank-sum (Mann-Whitney) test

      period {c |}      obs    rank sum    expected
{hline 13}{c +}{hline 33}
           1 {c |}{res}{col 17}   1195{col 26}   1499887{col 38} 1452522.5
           {txt}2 {c |}{res}{col 17}   1235{col 26}   1453778{col 38} 1501142.5
{txt}{hline 13}{c +}{hline 33}
    combined {c |}{res}{col 17}   2430{col 26}   2953665{col 38}   2953665

{txt}unadjusted variance{col 22}{res} 2.990e+08
{txt}adjustment for ties{col 22}{res}-1.022e+08
{txt}{col 22}{hline 10}
adjusted variance{col 22}{res} 1.968e+08

{txt}Ho: food~d30(period==1) = food~d30(period==2)
{col 14}z = {res}  3.376
{txt}{col 5}Prob > |z| = {res}  0.0007
{txt}
{com}.         ***  statistically different
.         *** z =   3.376, Prob > |z| =   0.0007
.         ttest           food_sec_comp_covid30, by (period) 

{txt}Two-sample t test with equal variances
{hline 9}{c TT}{hline 68}
   Group{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
       1 {c |}{res}{col 12}  1,195{col 22} 1.114644{col 34} .0560047{col 46} 1.936015{col 58} 1.004766{col 70} 1.224523
       {txt}2 {c |}{res}{col 12}  1,235{col 22} .8639676{col 34}  .049705{col 46} 1.746761{col 58}  .766452{col 70} .9614832
{txt}{hline 9}{c +}{hline 68}
combined {c |}{res}{col 12}  2,430{col 22} .9872428{col 34} .0374508{col 46} 1.846141{col 58} .9138039{col 70} 1.060682
{txt}{hline 9}{c +}{hline 68}
    diff {c |}{res}{col 22} .2506767{col 34} .0747544{col 58} .1040878{col 70} .3972657
{txt}{hline 9}{c BT}{hline 68}
    diff = mean({res}1{txt}) - mean({res}2{txt})                                      t = {res}  3.3533
{txt}Ho: diff = 0                                     degrees of freedom = {res}    2428

    {txt}Ha: diff < 0                 Ha: diff != 0                 Ha: diff > 0
 Pr(T < t) = {res}0.9996         {txt}Pr(|T| > |t|) = {res}0.0008          {txt}Pr(T > t) = {res}0.0004
{txt}
{com}.         *** just for comparsion - ranksum seems to be more correct in terms of data structure
.         *** also statistically different 
.         *** Pr(|T| > |t|) = 0.0008 
. 
. * examine missing values in these variables     
.         by period:      tab food_sec_year, missing
{err}not sorted
{txt}{search r(5), local:r(5);}

end of do-file

{search r(5), local:r(5);}

{com}. do "C:\Users\ALJOSE~1\AppData\Local\Temp\STD4d90_000000.tmp"
{txt}
{com}. * Project: UVM 
. * Created on: July 2020
. * Created by: alj
. * Stata v.16
. 
. * does
.         * cleans UVM two ways: long, wide (saves files)
.         * inspects food security variables 
.         * attrition basic analysis on food security variables 
. 
. * assumes
.         * standard - Stata v.16
.         
. * TO DO:
.         * adjust directiories for universal use - right now set to alj 
.         * adjust labels in wide data set - too long currently 
. 
. * **********************************************************************
. * 0 - setup
. * **********************************************************************
. 
. * open log
.         cap             log close
{smcl}
{com}{sf}{ul off}{smcl}
{com}{sf}{ul off}{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\aljosephson\Dropbox\COVID\UVM/9July_foodsecurity-log.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res} 9 Jul 2020, 11:51:13
{txt}
{com}. 
. * read in excel 
.         clear
{txt}
{com}.         import          excel "C:\Users\aljosephson\Dropbox\COVID\UVM\data_clean_joinT1andT2_0617_deidentified.xlsx", sheet("data_clean_joinT1andT2_0617") firstrow
{res}{text}(487 vars, 1,236 obs)

{com}.         
. * save into two files to create long data set   
.         keep            A UNIQUE_ID *_T1
{txt}
{com}.         rename          *_T1 *
{res}{txt}
{com}.         gen             period = 1
{txt}
{com}.         save            "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_T1_9July.dta", replace
{txt}file C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_T1_9July.dta saved

{com}.         
.         clear
{txt}
{com}.         import          excel "C:\Users\aljosephson\Dropbox\COVID\UVM\data_clean_joinT1andT2_0617_deidentified.xlsx", sheet("data_clean_joinT1andT2_0617") firstrow
{res}{text}(487 vars, 1,236 obs)

{com}.         keep            A UNIQUE_ID *_T2
{txt}
{com}.         rename          *_T2 *
{res}{txt}
{com}.         gen             period = 2
{txt}
{com}.         save            "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_T2_9July.dta", replace
{txt}file C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_T2_9July.dta saved

{com}. 
. * append together       
.         use             "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_T1_9July.dta", clear
{txt}
{com}.         append          using "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_T2_9July.dta", force
{txt}{p 0 7 2}
(note: variable
helpful_extraamount was double in the using data, but will be
str526 now)
{p_end}
{p 0 7 2}
(note: variable
income was str19 in the using data, but will be
byte now)
{p_end}
{p 0 7 2}
(note: variable
challenge_txt_close was 
str313, now str385 to accommodate using data's values)
{p_end}
{p 0 7 2}
(note: variable
strat_othertxt_cur was 
str350, now str488 to accommodate using data's values)
{p_end}
{p 0 7 2}
(note: variable
strat_othertxt_fut was 
str217, now str707 to accommodate using data's values)
{p_end}
{p 0 7 2}
(note: variable
other_comments was 
str1770, now strL to accommodate using data's values)
{p_end}

{com}.         
.         rename          UNIQUE_ID id
{res}{txt}
{com}.         rename          A idobs
{res}{txt}
{com}. 
.         save            "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_9July.dta", replace 
{txt}file C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_9July.dta saved

{com}.         *** this is the "long" dataset where T1 and T2 are stacked 
. 
. * **********************************************************************
. * 1 - food security variables (long)
. * **********************************************************************
. 
. * looking at food security variables
. * using long data set                   
. 
. * create variables to compare year and last 30  
. * non - binary variable: food_sec_year food_sec_last30          
.         gen             food_sec_comp_year30 = . 
{txt}(2,472 missing values generated)

{com}.         replace         food_sec_comp_year30 = food_sec_year if period == 1
{txt}(1,215 real changes made)

{com}.         replace         food_sec_comp_year30 = food_sec_last30 if period == 2
{txt}(1,235 real changes made)

{com}.         tab             food_sec_comp_year30

{txt}food_sec_co {c |}
  mp_year30 {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}      1,794       73.22       73.22
{txt}          1 {c |}{res}        214        8.73       81.96
{txt}          2 {c |}{res}        109        4.45       86.41
{txt}          3 {c |}{res}         68        2.78       89.18
{txt}          4 {c |}{res}         59        2.41       91.59
{txt}          5 {c |}{res}         64        2.61       94.20
{txt}          6 {c |}{res}        142        5.80      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      2,450      100.00
{txt}
{com}.         ranksum         food_sec_comp_year30, by (period)

{txt}Two-sample Wilcoxon rank-sum (Mann-Whitney) test

      period {c |}      obs    rank sum    expected
{hline 13}{c +}{hline 33}
           1 {c |}{res}{col 17}   1215{col 26} 1479641.5{col 38} 1488982.5
           {txt}2 {c |}{res}{col 17}   1235{col 26} 1522833.5{col 38} 1513492.5
{txt}{hline 13}{c +}{hline 33}
    combined {c |}{res}{col 17}   2450{col 26}   3002475{col 38}   3002475

{txt}unadjusted variance{col 22}{res} 3.065e+08
{txt}adjustment for ties{col 22}{res}-1.206e+08
{txt}{col 22}{hline 10}
adjusted variance{col 22}{res} 1.858e+08

{txt}Ho: food~r30(period==1) = food~r30(period==2)
{col 14}z = {res} -0.685
{txt}{col 5}Prob > |z| = {res}  0.4932
{txt}
{com}.         *** not statistically different
.         *** z =  -0.685, Prob > |z| =   0.4932
. 
. * create variables to compare covid and last 30
. * non - binary variable: food_sec_covid food_sec_last30 
.         gen             food_sec_comp_covid30 = .
{txt}(2,472 missing values generated)

{com}.         replace         food_sec_comp_covid30 = food_sec_covid if period == 1
{txt}(1,195 real changes made)

{com}.         replace         food_sec_comp_covid30 = food_sec_last30 if period == 2
{txt}(1,235 real changes made)

{com}.         tab             food_sec_comp_covid30

{txt}food_sec_co {c |}
 mp_covid30 {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}      1,697       69.84       69.84
{txt}          1 {c |}{res}        205        8.44       78.27
{txt}          2 {c |}{res}        125        5.14       83.42
{txt}          3 {c |}{res}         87        3.58       87.00
{txt}          4 {c |}{res}         63        2.59       89.59
{txt}          5 {c |}{res}         87        3.58       93.17
{txt}          6 {c |}{res}        166        6.83      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      2,430      100.00
{txt}
{com}.         ranksum         food_sec_comp_covid30, by (period)

{txt}Two-sample Wilcoxon rank-sum (Mann-Whitney) test

      period {c |}      obs    rank sum    expected
{hline 13}{c +}{hline 33}
           1 {c |}{res}{col 17}   1195{col 26}   1499887{col 38} 1452522.5
           {txt}2 {c |}{res}{col 17}   1235{col 26}   1453778{col 38} 1501142.5
{txt}{hline 13}{c +}{hline 33}
    combined {c |}{res}{col 17}   2430{col 26}   2953665{col 38}   2953665

{txt}unadjusted variance{col 22}{res} 2.990e+08
{txt}adjustment for ties{col 22}{res}-1.022e+08
{txt}{col 22}{hline 10}
adjusted variance{col 22}{res} 1.968e+08

{txt}Ho: food~d30(period==1) = food~d30(period==2)
{col 14}z = {res}  3.376
{txt}{col 5}Prob > |z| = {res}  0.0007
{txt}
{com}.         ***  statistically different
.         *** z =   3.376, Prob > |z| =   0.0007
.         ttest           food_sec_comp_covid30, by (period) 

{txt}Two-sample t test with equal variances
{hline 9}{c TT}{hline 68}
   Group{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
       1 {c |}{res}{col 12}  1,195{col 22} 1.114644{col 34} .0560047{col 46} 1.936015{col 58} 1.004766{col 70} 1.224523
       {txt}2 {c |}{res}{col 12}  1,235{col 22} .8639676{col 34}  .049705{col 46} 1.746761{col 58}  .766452{col 70} .9614832
{txt}{hline 9}{c +}{hline 68}
combined {c |}{res}{col 12}  2,430{col 22} .9872428{col 34} .0374508{col 46} 1.846141{col 58} .9138039{col 70} 1.060682
{txt}{hline 9}{c +}{hline 68}
    diff {c |}{res}{col 22} .2506767{col 34} .0747544{col 58} .1040878{col 70} .3972657
{txt}{hline 9}{c BT}{hline 68}
    diff = mean({res}1{txt}) - mean({res}2{txt})                                      t = {res}  3.3533
{txt}Ho: diff = 0                                     degrees of freedom = {res}    2428

    {txt}Ha: diff < 0                 Ha: diff != 0                 Ha: diff > 0
 Pr(T < t) = {res}0.9996         {txt}Pr(|T| > |t|) = {res}0.0008          {txt}Pr(T > t) = {res}0.0004
{txt}
{com}.         *** just for comparsion - ranksum seems to be more correct in terms of data structure
.         *** also statistically different 
.         *** Pr(|T| > |t|) = 0.0008 
. 
. * repeat above comparisons but for bin variables        
. * create variables to compare covid and last 30
. * binary variable: food_sec_covid_bin food_sec_last30_bin 
.         gen             food_sec_bin_comp_year30 = .
{txt}(2,472 missing values generated)

{com}.         replace         food_sec_bin_comp_year30 = food_sec_year_bin if period == 1
{txt}(1,215 real changes made)

{com}.         replace         food_sec_bin_comp_year30 = food_sec_last30_bin if period == 2
{txt}(1,235 real changes made)

{com}.         tab             food_sec_bin_comp_year30

{txt}food_sec_bi {c |}
n_comp_year {c |}
         30 {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}      2,008       81.96       81.96
{txt}          1 {c |}{res}        442       18.04      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      2,450      100.00
{txt}
{com}.         ttest           food_sec_bin_comp_year30, by (period)

{txt}Two-sample t test with equal variances
{hline 9}{c TT}{hline 68}
   Group{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
       1 {c |}{res}{col 12}  1,215{col 22} .1736626{col 34} .0108723{col 46}  .378975{col 58} .1523319{col 70} .1949932
       {txt}2 {c |}{res}{col 12}  1,235{col 22} .1870445{col 34} .0111006{col 46} .3901052{col 58} .1652663{col 70} .2088228
{txt}{hline 9}{c +}{hline 68}
combined {c |}{res}{col 12}  2,450{col 22} .1804082{col 34} .0077702{col 46} .3846056{col 58} .1651713{col 70}  .195645
{txt}{hline 9}{c +}{hline 68}
    diff {c |}{res}{col 22} -.013382{col 34} .0155417{col 58}-.0438583{col 70} .0170944
{txt}{hline 9}{c BT}{hline 68}
    diff = mean({res}1{txt}) - mean({res}2{txt})                                      t = {res} -0.8610
{txt}Ho: diff = 0                                     degrees of freedom = {res}    2448

    {txt}Ha: diff < 0                 Ha: diff != 0                 Ha: diff > 0
 Pr(T < t) = {res}0.1947         {txt}Pr(|T| > |t|) = {res}0.3893          {txt}Pr(T > t) = {res}0.8053
{txt}
{com}.         *** not statistically different
.         *** Pr(|T| > |t|) = 0.3893 
.         
. * create variables to compare covid and last 30
. * binary variable: food_sec_covid_bin food_sec_last30_bin       
.         gen             food_sec_bin_comp_covid30 = .
{txt}(2,472 missing values generated)

{com}.         replace         food_sec_bin_comp_covid30 = food_sec_covid_bin if period == 1
{txt}(1,195 real changes made)

{com}.         replace         food_sec_bin_comp_covid30 = food_sec_last30_bin if period == 2
{txt}(1,235 real changes made)

{com}.         ttest           food_sec_bin_comp_covid30, by (period)

{txt}Two-sample t test with equal variances
{hline 9}{c TT}{hline 68}
   Group{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
       1 {c |}{res}{col 12}  1,195{col 22} .2485356{col 34} .0125068{col 46} .4323448{col 58} .2239978{col 70} .2730733
       {txt}2 {c |}{res}{col 12}  1,235{col 22} .1870445{col 34} .0111006{col 46} .3901052{col 58} .1652663{col 70} .2088228
{txt}{hline 9}{c +}{hline 68}
combined {c |}{res}{col 12}  2,430{col 22}  .217284{col 34} .0083676{col 46} .4124823{col 58} .2008755{col 70} .2336924
{txt}{hline 9}{c +}{hline 68}
    diff {c |}{res}{col 22}  .061491{col 34} .0166944{col 58} .0287543{col 70} .0942277
{txt}{hline 9}{c BT}{hline 68}
    diff = mean({res}1{txt}) - mean({res}2{txt})                                      t = {res}  3.6833
{txt}Ho: diff = 0                                     degrees of freedom = {res}    2428

    {txt}Ha: diff < 0                 Ha: diff != 0                 Ha: diff > 0
 Pr(T < t) = {res}0.9999         {txt}Pr(|T| > |t|) = {res}0.0002          {txt}Pr(T > t) = {res}0.0001
{txt}
{com}.         *** statistically different
.         *** Pr(|T| > |t|) = 0.0002 
.         *** mean covid = 0.259, mean last30 = 0.187
. 
. * non-respondents to these questions in all periods     
.         count           if food_sec_year_bin != . & food_sec_covid_bin != . & food_sec_last30_bin != .
  {res}0
{txt}
{com}.         *** 43 did not respond to all three periods
.         *** 1193 responded to all
.         *** 1236 total observations 
.         
. * create non-respondent variable 
.         gen             non_respon_food_sec = 0 if food_sec_year_bin != . & food_sec_covid_bin != . & food_sec_last30_bin != .
{txt}(2,472 missing values generated)

{com}.         replace         non_respon_food_sec = 0 if food_sec_year_bin != . & food_sec_covid_bin != . & period == 1
{txt}(1,194 real changes made)

{com}.         replace         non_respon_food_sec = 0 if food_sec_last30_bin != . & period == 2
{txt}(1,235 real changes made)

{com}. 
. * do non-respondents differ in food security outcomes
. * examine binary variables
.         ttest           food_sec_bin_comp_year30, by (non_respon_food_sec)
{err}1 group found, 2 required
{txt}{search r(420), local:r(420);}

end of do-file

{search r(420), local:r(420);}

{com}. tab non_respon_food_sec

{txt}non_respon_ {c |}
   food_sec {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}      2,429      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      2,429      100.00

{com}. do "C:\Users\ALJOSE~1\AppData\Local\Temp\STD4d90_000000.tmp"
{txt}
{com}.         replace         non_respon_food_sec = 1 if non_respon_food_sec == . 
{txt}(43 real changes made)

{com}. 
{txt}end of do-file

{com}. do "C:\Users\ALJOSE~1\AppData\Local\Temp\STD4d90_000000.tmp"
{txt}
{com}.         ttest           food_sec_bin_comp_year30, by (non_respon_food_sec)

{txt}Two-sample t test with equal variances
{hline 9}{c TT}{hline 68}
   Group{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
       0 {c |}{res}{col 12}  2,429{col 22} .1803211{col 34} .0078023{col 46} .3845339{col 58} .1650213{col 70} .1956209
       {txt}1 {c |}{res}{col 12}     21{col 22} .1904762{col 34} .0878052{col 46} .4023739{col 58} .0073178{col 70} .3736346
{txt}{hline 9}{c +}{hline 68}
combined {c |}{res}{col 12}  2,450{col 22} .1804082{col 34} .0077702{col 46} .3846056{col 58} .1651713{col 70}  .195645
{txt}{hline 9}{c +}{hline 68}
    diff {c |}{res}{col 22}-.0101551{col 34} .0843068{col 58}-.1754751{col 70}  .155165
{txt}{hline 9}{c BT}{hline 68}
    diff = mean({res}0{txt}) - mean({res}1{txt})                                      t = {res} -0.1205
{txt}Ho: diff = 0                                     degrees of freedom = {res}    2448

    {txt}Ha: diff < 0                 Ha: diff != 0                 Ha: diff > 0
 Pr(T < t) = {res}0.4521         {txt}Pr(|T| > |t|) = {res}0.9041          {txt}Pr(T > t) = {res}0.5479
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\ALJOSE~1\AppData\Local\Temp\STD4d90_000000.tmp"
{txt}
{com}.         ttest           food_sec_bin_comp_covid30, by (non_respon_food_sec) 

{txt}Two-sample t test with equal variances
{hline 9}{c TT}{hline 68}
   Group{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
       0 {c |}{res}{col 12}  2,429{col 22} .2169617{col 34} .0083649{col 46} .4122612{col 58} .2005587{col 70} .2333647
       {txt}1 {c |}{res}{col 12}      1{col 22}        1{col 34}        .{col 46}        .{col 58}        .{col 70}        .
{txt}{hline 9}{c +}{hline 68}
combined {c |}{res}{col 12}  2,430{col 22}  .217284{col 34}        .{col 46}        .{col 58}        .{col 70}        .
{txt}{hline 9}{c +}{hline 68}
    diff {c |}{res}{col 22}-.7830383{col 34}        .{col 58}        .{col 70}        .
{txt}{hline 9}{c BT}{hline 68}
    diff = mean({res}0{txt}) - mean({res}1{txt})                                      t = {res}       .
{txt}Ho: diff = 0                                     degrees of freedom = {res}    2428

    {txt}Ha: diff < 0                 Ha: diff != 0                 Ha: diff > 0
 Pr(T < t) = {res}     .         {txt}Pr(|T| > |t|) = {res}     .          {txt}Pr(T > t) = {res}     .
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_food_sec_9July.do"
{txt}
{com}. * Project: UVM 
. * Created on: July 2020
. * Created by: alj
. * Stata v.16
. 
. * does
.         * cleans UVM two ways: long, wide (saves files)
.         * inspects food security variables 
.         * attrition basic analysis on food security variables 
. 
. * assumes
.         * standard - Stata v.16
.         
. * TO DO:
.         * adjust directiories for universal use - right now set to alj 
.         * adjust labels in wide data set - too long currently 
. 
. * **********************************************************************
. * 0 - setup
. * **********************************************************************
. 
. * open log
.         cap             log close
{smcl}
{com}{sf}{ul off}{smcl}
{com}{sf}{ul off}{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\aljosephson\Dropbox\COVID\UVM/9July_foodsecurity-log.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res} 9 Jul 2020, 11:54:01
{txt}
{com}. 
. * read in excel 
.         clear
{txt}
{com}.         import          excel "C:\Users\aljosephson\Dropbox\COVID\UVM\data_clean_joinT1andT2_0617_deidentified.xlsx", sheet("data_clean_joinT1andT2_0617") firstrow
{res}{text}(487 vars, 1,236 obs)

{com}.         
. * save into two files to create long data set   
.         keep            A UNIQUE_ID *_T1
{txt}
{com}.         rename          *_T1 *
{res}{txt}
{com}.         gen             period = 1
{txt}
{com}.         save            "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_T1_9July.dta", replace
{txt}file C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_T1_9July.dta saved

{com}.         
.         clear
{txt}
{com}.         import          excel "C:\Users\aljosephson\Dropbox\COVID\UVM\data_clean_joinT1andT2_0617_deidentified.xlsx", sheet("data_clean_joinT1andT2_0617") firstrow
{res}{text}(487 vars, 1,236 obs)

{com}.         keep            A UNIQUE_ID *_T2
{txt}
{com}.         rename          *_T2 *
{res}{txt}
{com}.         gen             period = 2
{txt}
{com}.         save            "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_T2_9July.dta", replace
{txt}file C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_T2_9July.dta saved

{com}. 
. * append together       
.         use             "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_T1_9July.dta", clear
{txt}
{com}.         append          using "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_T2_9July.dta", force
{txt}{p 0 7 2}
(note: variable
helpful_extraamount was double in the using data, but will be
str526 now)
{p_end}
{p 0 7 2}
(note: variable
income was str19 in the using data, but will be
byte now)
{p_end}
{p 0 7 2}
(note: variable
challenge_txt_close was 
str313, now str385 to accommodate using data's values)
{p_end}
{p 0 7 2}
(note: variable
strat_othertxt_cur was 
str350, now str488 to accommodate using data's values)
{p_end}
{p 0 7 2}
(note: variable
strat_othertxt_fut was 
str217, now str707 to accommodate using data's values)
{p_end}
{p 0 7 2}
(note: variable
other_comments was 
str1770, now strL to accommodate using data's values)
{p_end}

{com}.         
.         rename          UNIQUE_ID id
{res}{txt}
{com}.         rename          A idobs
{res}{txt}
{com}. 
.         save            "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_9July.dta", replace 
{txt}file C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_9July.dta saved

{com}.         *** this is the "long" dataset where T1 and T2 are stacked 
. 
. * **********************************************************************
. * 1 - food security variables (long)
. * **********************************************************************
. 
. * looking at food security variables
. * using long data set                   
. 
. * create variables to compare year and last 30  
. * non - binary variable: food_sec_year food_sec_last30          
.         gen             food_sec_comp_year30 = . 
{txt}(2,472 missing values generated)

{com}.         replace         food_sec_comp_year30 = food_sec_year if period == 1
{txt}(1,215 real changes made)

{com}.         replace         food_sec_comp_year30 = food_sec_last30 if period == 2
{txt}(1,235 real changes made)

{com}.         tab             food_sec_comp_year30

{txt}food_sec_co {c |}
  mp_year30 {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}      1,794       73.22       73.22
{txt}          1 {c |}{res}        214        8.73       81.96
{txt}          2 {c |}{res}        109        4.45       86.41
{txt}          3 {c |}{res}         68        2.78       89.18
{txt}          4 {c |}{res}         59        2.41       91.59
{txt}          5 {c |}{res}         64        2.61       94.20
{txt}          6 {c |}{res}        142        5.80      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      2,450      100.00
{txt}
{com}.         ranksum         food_sec_comp_year30, by (period)

{txt}Two-sample Wilcoxon rank-sum (Mann-Whitney) test

      period {c |}      obs    rank sum    expected
{hline 13}{c +}{hline 33}
           1 {c |}{res}{col 17}   1215{col 26} 1479641.5{col 38} 1488982.5
           {txt}2 {c |}{res}{col 17}   1235{col 26} 1522833.5{col 38} 1513492.5
{txt}{hline 13}{c +}{hline 33}
    combined {c |}{res}{col 17}   2450{col 26}   3002475{col 38}   3002475

{txt}unadjusted variance{col 22}{res} 3.065e+08
{txt}adjustment for ties{col 22}{res}-1.206e+08
{txt}{col 22}{hline 10}
adjusted variance{col 22}{res} 1.858e+08

{txt}Ho: food~r30(period==1) = food~r30(period==2)
{col 14}z = {res} -0.685
{txt}{col 5}Prob > |z| = {res}  0.4932
{txt}
{com}.         *** not statistically different
.         *** z =  -0.685, Prob > |z| =   0.4932
. 
. * create variables to compare covid and last 30
. * non - binary variable: food_sec_covid food_sec_last30 
.         gen             food_sec_comp_covid30 = .
{txt}(2,472 missing values generated)

{com}.         replace         food_sec_comp_covid30 = food_sec_covid if period == 1
{txt}(1,195 real changes made)

{com}.         replace         food_sec_comp_covid30 = food_sec_last30 if period == 2
{txt}(1,235 real changes made)

{com}.         tab             food_sec_comp_covid30

{txt}food_sec_co {c |}
 mp_covid30 {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}      1,697       69.84       69.84
{txt}          1 {c |}{res}        205        8.44       78.27
{txt}          2 {c |}{res}        125        5.14       83.42
{txt}          3 {c |}{res}         87        3.58       87.00
{txt}          4 {c |}{res}         63        2.59       89.59
{txt}          5 {c |}{res}         87        3.58       93.17
{txt}          6 {c |}{res}        166        6.83      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      2,430      100.00
{txt}
{com}.         ranksum         food_sec_comp_covid30, by (period)

{txt}Two-sample Wilcoxon rank-sum (Mann-Whitney) test

      period {c |}      obs    rank sum    expected
{hline 13}{c +}{hline 33}
           1 {c |}{res}{col 17}   1195{col 26}   1499887{col 38} 1452522.5
           {txt}2 {c |}{res}{col 17}   1235{col 26}   1453778{col 38} 1501142.5
{txt}{hline 13}{c +}{hline 33}
    combined {c |}{res}{col 17}   2430{col 26}   2953665{col 38}   2953665

{txt}unadjusted variance{col 22}{res} 2.990e+08
{txt}adjustment for ties{col 22}{res}-1.022e+08
{txt}{col 22}{hline 10}
adjusted variance{col 22}{res} 1.968e+08

{txt}Ho: food~d30(period==1) = food~d30(period==2)
{col 14}z = {res}  3.376
{txt}{col 5}Prob > |z| = {res}  0.0007
{txt}
{com}.         ***  statistically different
.         *** z =   3.376, Prob > |z| =   0.0007
.         ttest           food_sec_comp_covid30, by (period) 

{txt}Two-sample t test with equal variances
{hline 9}{c TT}{hline 68}
   Group{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
       1 {c |}{res}{col 12}  1,195{col 22} 1.114644{col 34} .0560047{col 46} 1.936015{col 58} 1.004766{col 70} 1.224523
       {txt}2 {c |}{res}{col 12}  1,235{col 22} .8639676{col 34}  .049705{col 46} 1.746761{col 58}  .766452{col 70} .9614832
{txt}{hline 9}{c +}{hline 68}
combined {c |}{res}{col 12}  2,430{col 22} .9872428{col 34} .0374508{col 46} 1.846141{col 58} .9138039{col 70} 1.060682
{txt}{hline 9}{c +}{hline 68}
    diff {c |}{res}{col 22} .2506767{col 34} .0747544{col 58} .1040878{col 70} .3972657
{txt}{hline 9}{c BT}{hline 68}
    diff = mean({res}1{txt}) - mean({res}2{txt})                                      t = {res}  3.3533
{txt}Ho: diff = 0                                     degrees of freedom = {res}    2428

    {txt}Ha: diff < 0                 Ha: diff != 0                 Ha: diff > 0
 Pr(T < t) = {res}0.9996         {txt}Pr(|T| > |t|) = {res}0.0008          {txt}Pr(T > t) = {res}0.0004
{txt}
{com}.         *** just for comparsion - ranksum seems to be more correct in terms of data structure
.         *** also statistically different 
.         *** Pr(|T| > |t|) = 0.0008 
. 
. * repeat above comparisons but for bin variables        
. * create variables to compare covid and last 30
. * binary variable: food_sec_covid_bin food_sec_last30_bin 
.         gen             food_sec_bin_comp_year30 = .
{txt}(2,472 missing values generated)

{com}.         replace         food_sec_bin_comp_year30 = food_sec_year_bin if period == 1
{txt}(1,215 real changes made)

{com}.         replace         food_sec_bin_comp_year30 = food_sec_last30_bin if period == 2
{txt}(1,235 real changes made)

{com}.         tab             food_sec_bin_comp_year30

{txt}food_sec_bi {c |}
n_comp_year {c |}
         30 {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}      2,008       81.96       81.96
{txt}          1 {c |}{res}        442       18.04      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      2,450      100.00
{txt}
{com}.         ttest           food_sec_bin_comp_year30, by (period)

{txt}Two-sample t test with equal variances
{hline 9}{c TT}{hline 68}
   Group{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
       1 {c |}{res}{col 12}  1,215{col 22} .1736626{col 34} .0108723{col 46}  .378975{col 58} .1523319{col 70} .1949932
       {txt}2 {c |}{res}{col 12}  1,235{col 22} .1870445{col 34} .0111006{col 46} .3901052{col 58} .1652663{col 70} .2088228
{txt}{hline 9}{c +}{hline 68}
combined {c |}{res}{col 12}  2,450{col 22} .1804082{col 34} .0077702{col 46} .3846056{col 58} .1651713{col 70}  .195645
{txt}{hline 9}{c +}{hline 68}
    diff {c |}{res}{col 22} -.013382{col 34} .0155417{col 58}-.0438583{col 70} .0170944
{txt}{hline 9}{c BT}{hline 68}
    diff = mean({res}1{txt}) - mean({res}2{txt})                                      t = {res} -0.8610
{txt}Ho: diff = 0                                     degrees of freedom = {res}    2448

    {txt}Ha: diff < 0                 Ha: diff != 0                 Ha: diff > 0
 Pr(T < t) = {res}0.1947         {txt}Pr(|T| > |t|) = {res}0.3893          {txt}Pr(T > t) = {res}0.8053
{txt}
{com}.         *** not statistically different
.         *** Pr(|T| > |t|) = 0.3893 
.         
. * create variables to compare covid and last 30
. * binary variable: food_sec_covid_bin food_sec_last30_bin       
.         gen             food_sec_bin_comp_covid30 = .
{txt}(2,472 missing values generated)

{com}.         replace         food_sec_bin_comp_covid30 = food_sec_covid_bin if period == 1
{txt}(1,195 real changes made)

{com}.         replace         food_sec_bin_comp_covid30 = food_sec_last30_bin if period == 2
{txt}(1,235 real changes made)

{com}.         ttest           food_sec_bin_comp_covid30, by (period)

{txt}Two-sample t test with equal variances
{hline 9}{c TT}{hline 68}
   Group{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
       1 {c |}{res}{col 12}  1,195{col 22} .2485356{col 34} .0125068{col 46} .4323448{col 58} .2239978{col 70} .2730733
       {txt}2 {c |}{res}{col 12}  1,235{col 22} .1870445{col 34} .0111006{col 46} .3901052{col 58} .1652663{col 70} .2088228
{txt}{hline 9}{c +}{hline 68}
combined {c |}{res}{col 12}  2,430{col 22}  .217284{col 34} .0083676{col 46} .4124823{col 58} .2008755{col 70} .2336924
{txt}{hline 9}{c +}{hline 68}
    diff {c |}{res}{col 22}  .061491{col 34} .0166944{col 58} .0287543{col 70} .0942277
{txt}{hline 9}{c BT}{hline 68}
    diff = mean({res}1{txt}) - mean({res}2{txt})                                      t = {res}  3.6833
{txt}Ho: diff = 0                                     degrees of freedom = {res}    2428

    {txt}Ha: diff < 0                 Ha: diff != 0                 Ha: diff > 0
 Pr(T < t) = {res}0.9999         {txt}Pr(|T| > |t|) = {res}0.0002          {txt}Pr(T > t) = {res}0.0001
{txt}
{com}.         *** statistically different
.         *** Pr(|T| > |t|) = 0.0002 
.         *** mean covid = 0.259, mean last30 = 0.187
. 
. * non-respondents to these questions in all periods     
.         count           if food_sec_year_bin != . & food_sec_covid_bin != . & food_sec_last30_bin != .
  {res}0
{txt}
{com}.         *** 43 did not respond to all three periods
.         *** 1193 responded to all
.         *** 1236 total observations 
.         
. * create non-respondent variable 
.         gen             non_respon_food_sec = 0 if food_sec_year_bin != . & food_sec_covid_bin != . & food_sec_last30_bin != .
{txt}(2,472 missing values generated)

{com}.         replace         non_respon_food_sec = 0 if food_sec_year_bin != . & food_sec_covid_bin != . & period == 1
{txt}(1,194 real changes made)

{com}.         replace         non_respon_food_sec = 0 if food_sec_last30_bin != . & period == 2
{txt}(1,235 real changes made)

{com}.         replace         non_respon_food_sec = 1 if non_respon_food_sec == . 
{txt}(43 real changes made)

{com}. 
. * do non-respondents differ in food security outcomes
. * examine binary variables
.         ttest           food_sec_bin_comp_year30, by (non_respon_food_sec)

{txt}Two-sample t test with equal variances
{hline 9}{c TT}{hline 68}
   Group{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
       0 {c |}{res}{col 12}  2,429{col 22} .1803211{col 34} .0078023{col 46} .3845339{col 58} .1650213{col 70} .1956209
       {txt}1 {c |}{res}{col 12}     21{col 22} .1904762{col 34} .0878052{col 46} .4023739{col 58} .0073178{col 70} .3736346
{txt}{hline 9}{c +}{hline 68}
combined {c |}{res}{col 12}  2,450{col 22} .1804082{col 34} .0077702{col 46} .3846056{col 58} .1651713{col 70}  .195645
{txt}{hline 9}{c +}{hline 68}
    diff {c |}{res}{col 22}-.0101551{col 34} .0843068{col 58}-.1754751{col 70}  .155165
{txt}{hline 9}{c BT}{hline 68}
    diff = mean({res}0{txt}) - mean({res}1{txt})                                      t = {res} -0.1205
{txt}Ho: diff = 0                                     degrees of freedom = {res}    2448

    {txt}Ha: diff < 0                 Ha: diff != 0                 Ha: diff > 0
 Pr(T < t) = {res}0.4521         {txt}Pr(|T| > |t|) = {res}0.9041          {txt}Pr(T > t) = {res}0.5479
{txt}
{com}.         *** only 21 included in comparison 
.         *** not statistically different 
.         *** Pr(|T| > |t|) = 0.9041
.         *ttest          food_sec_bin_comp_covid30, by (non_respon_food_sec) 
.         *** can't do other comparisons due to non-responses 
. 
. * save again    
.         save            "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_9July.dta", replace 
{txt}file C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_9July.dta saved

{com}. 
. * **********************************************************************
. * 2 - food security variables (wide)
. * **********************************************************************
. 
. * looking at food security variables
. * using wide data set 
. 
. * recreate new dataset, leaving things wide
.         clear
{txt}
{com}.         import          excel "C:\Users\aljosephson\Dropbox\COVID\UVM\data_clean_joinT1andT2_0617_deidentified.xlsx", sheet("data_clean_joinT1andT2_0617") firstrow
{res}{text}(487 vars, 1,236 obs)

{com}.         save            "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_9July_wide.dta"
{err}{p 0 4 2}
file C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_9July_wide.dta
already exists
{p_end}
{txt}{search r(602), local:r(602);}

end of do-file

{search r(602), local:r(602);}

{com}. do "C:\Users\ALJOSE~1\AppData\Local\Temp\STD4d90_000000.tmp"
{txt}
{com}. * Project: UVM 
. * Created on: July 2020
. * Created by: alj
. * Stata v.16
. 
. * does
.         * cleans UVM two ways: long, wide (saves files)
.         * inspects food security variables 
.         * attrition basic analysis on food security variables 
. 
. * assumes
.         * standard - Stata v.16
.         
. * TO DO:
.         * adjust directiories for universal use - right now set to alj 
.         * adjust labels in wide data set - too long currently 
. 
. * **********************************************************************
. * 0 - setup
. * **********************************************************************
. 
. * open log
.         cap             log close
{smcl}
{com}{sf}{ul off}{smcl}
{com}{sf}{ul off}{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\aljosephson\Dropbox\COVID\UVM/9July_foodsecurity-log.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res} 9 Jul 2020, 11:54:45
{txt}
{com}. 
. * read in excel 
.         clear
{txt}
{com}.         import          excel "C:\Users\aljosephson\Dropbox\COVID\UVM\data_clean_joinT1andT2_0617_deidentified.xlsx", sheet("data_clean_joinT1andT2_0617") firstrow
{res}{text}(487 vars, 1,236 obs)

{com}.         
. * save into two files to create long data set   
.         keep            A UNIQUE_ID *_T1
{txt}
{com}.         rename          *_T1 *
{res}{txt}
{com}.         gen             period = 1
{txt}
{com}.         save            "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_T1_9July.dta", replace
{txt}file C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_T1_9July.dta saved

{com}.         
.         clear
{txt}
{com}.         import          excel "C:\Users\aljosephson\Dropbox\COVID\UVM\data_clean_joinT1andT2_0617_deidentified.xlsx", sheet("data_clean_joinT1andT2_0617") firstrow
{res}{text}(487 vars, 1,236 obs)

{com}.         keep            A UNIQUE_ID *_T2
{txt}
{com}.         rename          *_T2 *
{res}{txt}
{com}.         gen             period = 2
{txt}
{com}.         save            "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_T2_9July.dta", replace
{txt}file C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_T2_9July.dta saved

{com}. 
. * append together       
.         use             "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_T1_9July.dta", clear
{txt}
{com}.         append          using "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_T2_9July.dta", force
{txt}{p 0 7 2}
(note: variable
helpful_extraamount was double in the using data, but will be
str526 now)
{p_end}
{p 0 7 2}
(note: variable
income was str19 in the using data, but will be
byte now)
{p_end}
{p 0 7 2}
(note: variable
challenge_txt_close was 
str313, now str385 to accommodate using data's values)
{p_end}
{p 0 7 2}
(note: variable
strat_othertxt_cur was 
str350, now str488 to accommodate using data's values)
{p_end}
{p 0 7 2}
(note: variable
strat_othertxt_fut was 
str217, now str707 to accommodate using data's values)
{p_end}
{p 0 7 2}
(note: variable
other_comments was 
str1770, now strL to accommodate using data's values)
{p_end}

{com}.         
.         rename          UNIQUE_ID id
{res}{txt}
{com}.         rename          A idobs
{res}{txt}
{com}. 
.         save            "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_9July.dta", replace 
{txt}file C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_9July.dta saved

{com}.         *** this is the "long" dataset where T1 and T2 are stacked 
. 
. * **********************************************************************
. * 1 - food security variables (long)
. * **********************************************************************
. 
. * looking at food security variables
. * using long data set                   
. 
. * create variables to compare year and last 30  
. * non - binary variable: food_sec_year food_sec_last30          
.         gen             food_sec_comp_year30 = . 
{txt}(2,472 missing values generated)

{com}.         replace         food_sec_comp_year30 = food_sec_year if period == 1
{txt}(1,215 real changes made)

{com}.         replace         food_sec_comp_year30 = food_sec_last30 if period == 2
{txt}(1,235 real changes made)

{com}.         tab             food_sec_comp_year30

{txt}food_sec_co {c |}
  mp_year30 {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}      1,794       73.22       73.22
{txt}          1 {c |}{res}        214        8.73       81.96
{txt}          2 {c |}{res}        109        4.45       86.41
{txt}          3 {c |}{res}         68        2.78       89.18
{txt}          4 {c |}{res}         59        2.41       91.59
{txt}          5 {c |}{res}         64        2.61       94.20
{txt}          6 {c |}{res}        142        5.80      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      2,450      100.00
{txt}
{com}.         ranksum         food_sec_comp_year30, by (period)

{txt}Two-sample Wilcoxon rank-sum (Mann-Whitney) test

      period {c |}      obs    rank sum    expected
{hline 13}{c +}{hline 33}
           1 {c |}{res}{col 17}   1215{col 26} 1479641.5{col 38} 1488982.5
           {txt}2 {c |}{res}{col 17}   1235{col 26} 1522833.5{col 38} 1513492.5
{txt}{hline 13}{c +}{hline 33}
    combined {c |}{res}{col 17}   2450{col 26}   3002475{col 38}   3002475

{txt}unadjusted variance{col 22}{res} 3.065e+08
{txt}adjustment for ties{col 22}{res}-1.206e+08
{txt}{col 22}{hline 10}
adjusted variance{col 22}{res} 1.858e+08

{txt}Ho: food~r30(period==1) = food~r30(period==2)
{col 14}z = {res} -0.685
{txt}{col 5}Prob > |z| = {res}  0.4932
{txt}
{com}.         *** not statistically different
.         *** z =  -0.685, Prob > |z| =   0.4932
. 
. * create variables to compare covid and last 30
. * non - binary variable: food_sec_covid food_sec_last30 
.         gen             food_sec_comp_covid30 = .
{txt}(2,472 missing values generated)

{com}.         replace         food_sec_comp_covid30 = food_sec_covid if period == 1
{txt}(1,195 real changes made)

{com}.         replace         food_sec_comp_covid30 = food_sec_last30 if period == 2
{txt}(1,235 real changes made)

{com}.         tab             food_sec_comp_covid30

{txt}food_sec_co {c |}
 mp_covid30 {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}      1,697       69.84       69.84
{txt}          1 {c |}{res}        205        8.44       78.27
{txt}          2 {c |}{res}        125        5.14       83.42
{txt}          3 {c |}{res}         87        3.58       87.00
{txt}          4 {c |}{res}         63        2.59       89.59
{txt}          5 {c |}{res}         87        3.58       93.17
{txt}          6 {c |}{res}        166        6.83      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      2,430      100.00
{txt}
{com}.         ranksum         food_sec_comp_covid30, by (period)

{txt}Two-sample Wilcoxon rank-sum (Mann-Whitney) test

      period {c |}      obs    rank sum    expected
{hline 13}{c +}{hline 33}
           1 {c |}{res}{col 17}   1195{col 26}   1499887{col 38} 1452522.5
           {txt}2 {c |}{res}{col 17}   1235{col 26}   1453778{col 38} 1501142.5
{txt}{hline 13}{c +}{hline 33}
    combined {c |}{res}{col 17}   2430{col 26}   2953665{col 38}   2953665

{txt}unadjusted variance{col 22}{res} 2.990e+08
{txt}adjustment for ties{col 22}{res}-1.022e+08
{txt}{col 22}{hline 10}
adjusted variance{col 22}{res} 1.968e+08

{txt}Ho: food~d30(period==1) = food~d30(period==2)
{col 14}z = {res}  3.376
{txt}{col 5}Prob > |z| = {res}  0.0007
{txt}
{com}.         ***  statistically different
.         *** z =   3.376, Prob > |z| =   0.0007
.         ttest           food_sec_comp_covid30, by (period) 

{txt}Two-sample t test with equal variances
{hline 9}{c TT}{hline 68}
   Group{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
       1 {c |}{res}{col 12}  1,195{col 22} 1.114644{col 34} .0560047{col 46} 1.936015{col 58} 1.004766{col 70} 1.224523
       {txt}2 {c |}{res}{col 12}  1,235{col 22} .8639676{col 34}  .049705{col 46} 1.746761{col 58}  .766452{col 70} .9614832
{txt}{hline 9}{c +}{hline 68}
combined {c |}{res}{col 12}  2,430{col 22} .9872428{col 34} .0374508{col 46} 1.846141{col 58} .9138039{col 70} 1.060682
{txt}{hline 9}{c +}{hline 68}
    diff {c |}{res}{col 22} .2506767{col 34} .0747544{col 58} .1040878{col 70} .3972657
{txt}{hline 9}{c BT}{hline 68}
    diff = mean({res}1{txt}) - mean({res}2{txt})                                      t = {res}  3.3533
{txt}Ho: diff = 0                                     degrees of freedom = {res}    2428

    {txt}Ha: diff < 0                 Ha: diff != 0                 Ha: diff > 0
 Pr(T < t) = {res}0.9996         {txt}Pr(|T| > |t|) = {res}0.0008          {txt}Pr(T > t) = {res}0.0004
{txt}
{com}.         *** just for comparsion - ranksum seems to be more correct in terms of data structure
.         *** also statistically different 
.         *** Pr(|T| > |t|) = 0.0008 
. 
. * repeat above comparisons but for bin variables        
. * create variables to compare covid and last 30
. * binary variable: food_sec_covid_bin food_sec_last30_bin 
.         gen             food_sec_bin_comp_year30 = .
{txt}(2,472 missing values generated)

{com}.         replace         food_sec_bin_comp_year30 = food_sec_year_bin if period == 1
{txt}(1,215 real changes made)

{com}.         replace         food_sec_bin_comp_year30 = food_sec_last30_bin if period == 2
{txt}(1,235 real changes made)

{com}.         tab             food_sec_bin_comp_year30

{txt}food_sec_bi {c |}
n_comp_year {c |}
         30 {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}      2,008       81.96       81.96
{txt}          1 {c |}{res}        442       18.04      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      2,450      100.00
{txt}
{com}.         ttest           food_sec_bin_comp_year30, by (period)

{txt}Two-sample t test with equal variances
{hline 9}{c TT}{hline 68}
   Group{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
       1 {c |}{res}{col 12}  1,215{col 22} .1736626{col 34} .0108723{col 46}  .378975{col 58} .1523319{col 70} .1949932
       {txt}2 {c |}{res}{col 12}  1,235{col 22} .1870445{col 34} .0111006{col 46} .3901052{col 58} .1652663{col 70} .2088228
{txt}{hline 9}{c +}{hline 68}
combined {c |}{res}{col 12}  2,450{col 22} .1804082{col 34} .0077702{col 46} .3846056{col 58} .1651713{col 70}  .195645
{txt}{hline 9}{c +}{hline 68}
    diff {c |}{res}{col 22} -.013382{col 34} .0155417{col 58}-.0438583{col 70} .0170944
{txt}{hline 9}{c BT}{hline 68}
    diff = mean({res}1{txt}) - mean({res}2{txt})                                      t = {res} -0.8610
{txt}Ho: diff = 0                                     degrees of freedom = {res}    2448

    {txt}Ha: diff < 0                 Ha: diff != 0                 Ha: diff > 0
 Pr(T < t) = {res}0.1947         {txt}Pr(|T| > |t|) = {res}0.3893          {txt}Pr(T > t) = {res}0.8053
{txt}
{com}.         *** not statistically different
.         *** Pr(|T| > |t|) = 0.3893 
.         
. * create variables to compare covid and last 30
. * binary variable: food_sec_covid_bin food_sec_last30_bin       
.         gen             food_sec_bin_comp_covid30 = .
{txt}(2,472 missing values generated)

{com}.         replace         food_sec_bin_comp_covid30 = food_sec_covid_bin if period == 1
{txt}(1,195 real changes made)

{com}.         replace         food_sec_bin_comp_covid30 = food_sec_last30_bin if period == 2
{txt}(1,235 real changes made)

{com}.         ttest           food_sec_bin_comp_covid30, by (period)

{txt}Two-sample t test with equal variances
{hline 9}{c TT}{hline 68}
   Group{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
       1 {c |}{res}{col 12}  1,195{col 22} .2485356{col 34} .0125068{col 46} .4323448{col 58} .2239978{col 70} .2730733
       {txt}2 {c |}{res}{col 12}  1,235{col 22} .1870445{col 34} .0111006{col 46} .3901052{col 58} .1652663{col 70} .2088228
{txt}{hline 9}{c +}{hline 68}
combined {c |}{res}{col 12}  2,430{col 22}  .217284{col 34} .0083676{col 46} .4124823{col 58} .2008755{col 70} .2336924
{txt}{hline 9}{c +}{hline 68}
    diff {c |}{res}{col 22}  .061491{col 34} .0166944{col 58} .0287543{col 70} .0942277
{txt}{hline 9}{c BT}{hline 68}
    diff = mean({res}1{txt}) - mean({res}2{txt})                                      t = {res}  3.6833
{txt}Ho: diff = 0                                     degrees of freedom = {res}    2428

    {txt}Ha: diff < 0                 Ha: diff != 0                 Ha: diff > 0
 Pr(T < t) = {res}0.9999         {txt}Pr(|T| > |t|) = {res}0.0002          {txt}Pr(T > t) = {res}0.0001
{txt}
{com}.         *** statistically different
.         *** Pr(|T| > |t|) = 0.0002 
.         *** mean covid = 0.259, mean last30 = 0.187
. 
. * non-respondents to these questions in all periods     
.         count           if food_sec_year_bin != . & food_sec_covid_bin != . & food_sec_last30_bin != .
  {res}0
{txt}
{com}.         *** 43 did not respond to all three periods
.         *** 1193 responded to all
.         *** 1236 total observations 
.         
. * create non-respondent variable 
.         gen             non_respon_food_sec = 0 if food_sec_year_bin != . & food_sec_covid_bin != . & food_sec_last30_bin != .
{txt}(2,472 missing values generated)

{com}.         replace         non_respon_food_sec = 0 if food_sec_year_bin != . & food_sec_covid_bin != . & period == 1
{txt}(1,194 real changes made)

{com}.         replace         non_respon_food_sec = 0 if food_sec_last30_bin != . & period == 2
{txt}(1,235 real changes made)

{com}.         replace         non_respon_food_sec = 1 if non_respon_food_sec == . 
{txt}(43 real changes made)

{com}. 
. * do non-respondents differ in food security outcomes
. * examine binary variables
.         ttest           food_sec_bin_comp_year30, by (non_respon_food_sec)

{txt}Two-sample t test with equal variances
{hline 9}{c TT}{hline 68}
   Group{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
       0 {c |}{res}{col 12}  2,429{col 22} .1803211{col 34} .0078023{col 46} .3845339{col 58} .1650213{col 70} .1956209
       {txt}1 {c |}{res}{col 12}     21{col 22} .1904762{col 34} .0878052{col 46} .4023739{col 58} .0073178{col 70} .3736346
{txt}{hline 9}{c +}{hline 68}
combined {c |}{res}{col 12}  2,450{col 22} .1804082{col 34} .0077702{col 46} .3846056{col 58} .1651713{col 70}  .195645
{txt}{hline 9}{c +}{hline 68}
    diff {c |}{res}{col 22}-.0101551{col 34} .0843068{col 58}-.1754751{col 70}  .155165
{txt}{hline 9}{c BT}{hline 68}
    diff = mean({res}0{txt}) - mean({res}1{txt})                                      t = {res} -0.1205
{txt}Ho: diff = 0                                     degrees of freedom = {res}    2448

    {txt}Ha: diff < 0                 Ha: diff != 0                 Ha: diff > 0
 Pr(T < t) = {res}0.4521         {txt}Pr(|T| > |t|) = {res}0.9041          {txt}Pr(T > t) = {res}0.5479
{txt}
{com}.         *** only 21 included in comparison 
.         *** not statistically different 
.         *** Pr(|T| > |t|) = 0.9041
.         *ttest          food_sec_bin_comp_covid30, by (non_respon_food_sec) 
.         *** can't do other comparisons due to non-responses 
. 
. * save again    
.         save            "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_9July.dta", replace 
{txt}file C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_9July.dta saved

{com}. 
. * **********************************************************************
. * 2 - food security variables (wide)
. * **********************************************************************
. 
. * looking at food security variables
. * using wide data set 
. 
. * recreate new dataset, leaving things wide
.         clear
{txt}
{com}.         import          excel "C:\Users\aljosephson\Dropbox\COVID\UVM\data_clean_joinT1andT2_0617_deidentified.xlsx", sheet("data_clean_joinT1andT2_0617") firstrow
{res}{text}(487 vars, 1,236 obs)

{com}.         save            "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_9July_wide.dta", replace
{txt}file C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_9July_wide.dta saved

{com}.         *** this is the "wide" dataset where T1 and T2 are next to each other - like in Excel data  
. 
. * non-respondents to these questions in all periods     
.         count           if food_sec_year_bin_T1 != . & food_sec_covid_bin_T1 != . & food_sec_last30_bin_T2 != .
  {res}1,193
{txt}
{com}.         *** 43 did not respond to all three periods
.         *** 1193 responded to all
.         *** 1236 total observations
.         
. * create variable to determine movement in status between year and covid        
.         gen             food_sec_yearcov = 1 if food_sec_covid_bin_T1 == 1 & food_sec_year_bin_T1 == 0
{txt}(1,122 missing values generated)

{com}.         replace         food_sec_yearcov = 0 if food_sec_covid_bin_T1 == 0 & food_sec_year_bin_T1 == 0
{txt}(873 real changes made)

{com}.         replace         food_sec_yearcov = 2 if food_sec_covid_bin_T1 == 1 & food_sec_year_bin_T1 == 1
{txt}(182 real changes made)

{com}.         replace         food_sec_yearcov = -1 if food_sec_covid_bin_T1 == 0 & food_sec_year_bin_T1 == 1
{txt}(25 real changes made)

{com}.         label           var food_sec_yearcov "-1 if become secure in covid, 0 if food secure both periods, 1 if become insecure in covid, 2 if always insecure"
{txt}note: label truncated to 80 characters

{com}.         *** label ends up truncated, need to adjust
. 
. * create variable to determine movement in status between covid and last 30     
.         tab             food_sec_covid_bin

{txt}food_sec_co {c |}
 vid_bin_T1 {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}        898       75.15       75.15
{txt}          1 {c |}{res}        297       24.85      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,195      100.00
{txt}
{com}.         gen             food_sec_cov30 = 1 if food_sec_last30_bin_T2 == 1 & food_sec_covid_bin_T1 == 0
{txt}(1,203 missing values generated)

{com}.         replace         food_sec_cov30 = 0 if food_sec_last30_bin_T2 == 0 & food_sec_covid_bin_T1 == 0
{txt}(864 real changes made)

{com}.         replace         food_sec_cov30 = 2 if food_sec_last30_bin_T2 == 1 & food_sec_covid_bin_T1 == 1
{txt}(192 real changes made)

{com}.         replace         food_sec_cov30 = -1 if food_sec_last30_bin_T2 == 0 & food_sec_covid_bin_T1 == 1
{txt}(105 real changes made)

{com}.         label           var food_sec_cov30 "-1 if become secure in covid, 0 if food secure both periods, 1 if become insecure in covid, 2 if always insecure"
{txt}note: label truncated to 80 characters

{com}.         *** label ends up truncated, need to adjust
.         
.         *** from analysis in this part, put into excel file `following_panel_analysis_alj-food_insecure', not many differences
.         *** seem to be dropping from food secure folks (?)
.         
. * save again 
.         save            "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_9July_wide.dta", replace
{txt}file C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_9July_wide.dta saved

{com}. 
. * **********************************************************************
. * 3 - preliminary attrition analysis 
. * **********************************************************************
. 
. * generate variable for attriters
. * people who do not respond to all three 
.         gen             non_respon_food_sec = 0 if food_sec_year_bin_T1 != . & food_sec_covid_bin_T1 != . & food_sec_last30_bin_T2 != .
{txt}(43 missing values generated)

{com}.         replace         non_respon_food_sec = 1 if non_respon_food_sec == .
{txt}(43 real changes made)

{com}.         *** 43 did not respond to all three periods
.         *** 1193 responded to all
.         *** 1236 total observations 
. 
. * examine set of sociodemo variables    
.         tab             ethnicity_T1

{txt}ethnicity_T {c |}
          1 {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}      1,201       98.44       98.44
{txt}          1 {c |}{res}          2        0.16       98.61
{txt}          2 {c |}{res}          2        0.16       98.77
{txt}          3 {c |}{res}          1        0.08       98.85
{txt}          4 {c |}{res}         14        1.15      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,220      100.00
{txt}
{com}.         tab             year_born_T1

{txt}year_born_T {c |}
          1 {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
       1926 {c |}{res}          1        0.08        0.08
{txt}       1930 {c |}{res}          2        0.16        0.24
{txt}       1931 {c |}{res}          1        0.08        0.33
{txt}       1933 {c |}{res}          2        0.16        0.49
{txt}       1935 {c |}{res}          1        0.08        0.57
{txt}       1936 {c |}{res}          3        0.24        0.81
{txt}       1937 {c |}{res}          2        0.16        0.98
{txt}       1938 {c |}{res}          5        0.41        1.38
{txt}       1939 {c |}{res}          5        0.41        1.79
{txt}       1940 {c |}{res}          2        0.16        1.95
{txt}       1941 {c |}{res}          3        0.24        2.20
{txt}       1942 {c |}{res}          9        0.73        2.93
{txt}       1943 {c |}{res}         12        0.98        3.91
{txt}       1944 {c |}{res}          8        0.65        4.56
{txt}       1945 {c |}{res}         11        0.90        5.46
{txt}       1946 {c |}{res}         18        1.47        6.92
{txt}       1947 {c |}{res}         22        1.79        8.71
{txt}       1948 {c |}{res}         24        1.95       10.67
{txt}       1949 {c |}{res}         22        1.79       12.46
{txt}       1950 {c |}{res}         32        2.61       15.07
{txt}       1951 {c |}{res}         23        1.87       16.94
{txt}       1952 {c |}{res}         33        2.69       19.63
{txt}       1953 {c |}{res}         34        2.77       22.39
{txt}       1954 {c |}{res}         23        1.87       24.27
{txt}       1955 {c |}{res}         31        2.52       26.79
{txt}       1956 {c |}{res}         32        2.61       29.40
{txt}       1957 {c |}{res}         33        2.69       32.08
{txt}       1958 {c |}{res}         37        3.01       35.10
{txt}       1959 {c |}{res}         25        2.04       37.13
{txt}       1960 {c |}{res}         28        2.28       39.41
{txt}       1961 {c |}{res}         26        2.12       41.53
{txt}       1962 {c |}{res}         27        2.20       43.73
{txt}       1963 {c |}{res}         20        1.63       45.36
{txt}       1964 {c |}{res}         24        1.95       47.31
{txt}       1965 {c |}{res}         19        1.55       48.86
{txt}       1966 {c |}{res}         13        1.06       49.92
{txt}       1967 {c |}{res}         11        0.90       50.81
{txt}       1968 {c |}{res}         19        1.55       52.36
{txt}       1969 {c |}{res}         27        2.20       54.56
{txt}       1970 {c |}{res}         25        2.04       56.60
{txt}       1971 {c |}{res}         19        1.55       58.14
{txt}       1972 {c |}{res}         20        1.63       59.77
{txt}       1973 {c |}{res}         20        1.63       61.40
{txt}       1974 {c |}{res}         25        2.04       63.44
{txt}       1975 {c |}{res}         17        1.38       64.82
{txt}       1976 {c |}{res}         23        1.87       66.69
{txt}       1977 {c |}{res}         23        1.87       68.57
{txt}       1978 {c |}{res}         17        1.38       69.95
{txt}       1979 {c |}{res}         25        2.04       71.99
{txt}       1980 {c |}{res}         29        2.36       74.35
{txt}       1981 {c |}{res}         17        1.38       75.73
{txt}       1982 {c |}{res}         23        1.87       77.61
{txt}       1983 {c |}{res}         25        2.04       79.64
{txt}       1984 {c |}{res}         26        2.12       81.76
{txt}       1985 {c |}{res}         31        2.52       84.28
{txt}       1986 {c |}{res}         20        1.63       85.91
{txt}       1987 {c |}{res}         21        1.71       87.62
{txt}       1988 {c |}{res}         22        1.79       89.41
{txt}       1989 {c |}{res}         16        1.30       90.72
{txt}       1990 {c |}{res}         20        1.63       92.35
{txt}       1991 {c |}{res}         15        1.22       93.57
{txt}       1992 {c |}{res}         14        1.14       94.71
{txt}       1993 {c |}{res}         15        1.22       95.93
{txt}       1994 {c |}{res}         12        0.98       96.91
{txt}       1995 {c |}{res}         14        1.14       98.05
{txt}       1996 {c |}{res}          7        0.57       98.62
{txt}       1997 {c |}{res}          6        0.49       99.10
{txt}       1998 {c |}{res}          6        0.49       99.59
{txt}       1999 {c |}{res}          1        0.08       99.67
{txt}       2000 {c |}{res}          3        0.24       99.92
{txt}       2001 {c |}{res}          1        0.08      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,228      100.00
{txt}
{com}.         tab             gender_id_T1

{txt}gender_id_T {c |}
          1 {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}        218       17.72       17.72
{txt}          2 {c |}{res}        992       80.65       98.37
{txt}          3 {c |}{res}          4        0.33       98.70
{txt}          4 {c |}{res}         10        0.81       99.51
{txt}      Other {c |}{res}          6        0.49      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,230      100.00
{txt}
{com}.         tab             income_T1

  {txt}income_T1 {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}         66        5.44        5.44
{txt}          2 {c |}{res}        151       12.45       17.89
{txt}          3 {c |}{res}        300       24.73       42.62
{txt}          4 {c |}{res}        259       21.35       63.97
{txt}          5 {c |}{res}        168       13.85       77.82
{txt}          6 {c |}{res}        134       11.05       88.87
{txt}          7 {c |}{res}         63        5.19       94.06
{txt}          8 {c |}{res}         72        5.94      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,213      100.00
{txt}
{com}.         tab             income_T2

          {txt}income_T2 {c |}      Freq.     Percent        Cum.
{hline 20}{c +}{hline 35}
$100,000 - $124,999 {c |}{res}         28        7.27        7.27
{txt} $125,000- $149,999 {c |}{res}         13        3.38       10.65
{txt}  $13,000 - $24,999 {c |}{res}         65       16.88       27.53
{txt}  $25,000 - $49,999 {c |}{res}        114       29.61       57.14
{txt}  $50,000 - $74,999 {c |}{res}         74       19.22       76.36
{txt}  $75,000 - $99,999 {c |}{res}         44       11.43       87.79
{txt}  Less than $12,999 {c |}{res}         33        8.57       96.36
{txt} More than $150,000 {c |}{res}         14        3.64      100.00
{txt}{hline 20}{c +}{hline 35}
              Total {c |}{res}        385      100.00
{txt}
{com}.         
. * encode, adjust variables as necessary 
.         encode          gender_id_T1, generate (gender_id_encode)
{txt}
{com}.         gen             female = 1 if gender_id_encode == 2
{txt}(244 missing values generated)

{com}.         replace         female = 0 if gender_id_encode != 2
{txt}(244 real changes made)

{com}.         *** variable = 1 if female, 0 otherwise 
.         tab             ethnicity_T1

{txt}ethnicity_T {c |}
          1 {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}      1,201       98.44       98.44
{txt}          1 {c |}{res}          2        0.16       98.61
{txt}          2 {c |}{res}          2        0.16       98.77
{txt}          3 {c |}{res}          1        0.08       98.85
{txt}          4 {c |}{res}         14        1.15      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,220      100.00
{txt}
{com}.         gen             white = 1 if ethnicity_T1 == 0
{txt}(35 missing values generated)

{com}.         replace         white = 0 if ethnicity_T1 != 0
{txt}(35 real changes made)

{com}.         *** variable = 1 if non-hispanic white, 0 otherwise 
.         
. * basic regs to test for attrition      
. 
. * include female, white Hispanic, white race, year born, income, income change 
. * something odd happens with income T2 - unsure - so just use T1 
.         reg             non_respon_food_sec female white year_born_T1 race_white_T1 income_T1 income_change_T2

{txt}      Source {c |}       SS           df       MS      Number of obs   ={res}     1,148
{txt}{hline 13}{c +}{hline 34}   F(6, 1141)      = {res}     4.36
{txt}       Model {c |} {res} .844855977         6   .14080933   {txt}Prob > F        ={res}    0.0002
{txt}    Residual {c |} {res} 36.8302311     1,141  .032278905   {txt}R-squared       ={res}    0.0224
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}    0.0173
{txt}       Total {c |} {res} 37.6750871     1,147  .032846632   {txt}Root MSE        =   {res} .17966

{txt}{hline 14}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}non_respon_~c{col 15}{c |}      Coef.{col 27}   Std. Err.{col 39}      t{col 47}   P>|t|{col 55}     [95% Con{col 68}f. Interval]
{hline 14}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 7}female {c |}{col 15}{res}{space 2} .0283112{col 27}{space 2} .0134105{col 38}{space 1}    2.11{col 47}{space 3}0.035{col 55}{space 4} .0019992{col 68}{space 3} .0546232
{txt}{space 8}white {c |}{col 15}{res}{space 2}-.0796474{col 27}{space 2} .0348651{col 38}{space 1}   -2.28{col 47}{space 3}0.023{col 55}{space 4}-.1480542{col 68}{space 3}-.0112406
{txt}{space 1}year_born_T1 {c |}{col 15}{res}{space 2}-.0013645{col 27}{space 2} .0003442{col 38}{space 1}   -3.96{col 47}{space 3}0.000{col 55}{space 4}-.0020399{col 68}{space 3}-.0006891
{txt}race_white_T1 {c |}{col 15}{res}{space 2}-.0103707{col 27}{space 2} .0289769{col 38}{space 1}   -0.36{col 47}{space 3}0.720{col 55}{space 4}-.0672246{col 68}{space 3} .0464833
{txt}{space 4}income_T1 {c |}{col 15}{res}{space 2} .0032272{col 27}{space 2} .0029821{col 38}{space 1}    1.08{col 47}{space 3}0.279{col 55}{space 4}-.0026237{col 68}{space 3} .0090782
{txt}income_chan~2 {c |}{col 15}{res}{space 2} -.007007{col 27}{space 2} .0113563{col 38}{space 1}   -0.62{col 47}{space 3}0.537{col 55}{space 4}-.0292887{col 68}{space 3} .0152746
{txt}{space 8}_cons {c |}{col 15}{res}{space 2} 2.773171{col 27}{space 2} .6782945{col 38}{space 1}    4.09{col 47}{space 3}0.000{col 55}{space 4} 1.442327{col 68}{space 3} 4.104016
{txt}{hline 14}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}.         *** income_T1 and income_change_T2 have non-responses - so maybe not included in subsequent 
.         *** some bias in attrition: female, white, year born
.         *** female = 0.028 (0.013) - significant at 5 percent level - women are more likely to not respond to all three 
.         *** white ethnicity = -0.080 (0.035) - significant at 5 percent level - Hispanics more likely to not respond to all three 
.         *** year born = -0.001 (0.0003) - significant at 1 percent level - older folks more likely to not respond to all three 
. 
. * include female, white Hispanic, white race, year born, income 
.         reg             non_respon_food_sec female white year_born_T1 race_white_T1 income_T1 

{txt}      Source {c |}       SS           df       MS      Number of obs   ={res}     1,205
{txt}{hline 13}{c +}{hline 34}   F(5, 1199)      = {res}     5.87
{txt}       Model {c |} {res} .945880744         5  .189176149   {txt}Prob > F        ={res}    0.0000
{txt}    Residual {c |} {res} 38.6590985     1,199  .032242784   {txt}R-squared       ={res}    0.0239
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}    0.0198
{txt}       Total {c |} {res} 39.6049793     1,204  .032894501   {txt}Root MSE        =   {res} .17956

{txt}{hline 14}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}non_respon_~c{col 15}{c |}      Coef.{col 27}   Std. Err.{col 39}      t{col 47}   P>|t|{col 55}     [95% Con{col 68}f. Interval]
{hline 14}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 7}female {c |}{col 15}{res}{space 2} .0294419{col 27}{space 2}  .013192{col 38}{space 1}    2.23{col 47}{space 3}0.026{col 55}{space 4} .0035599{col 68}{space 3}  .055324
{txt}{space 8}white {c |}{col 15}{res}{space 2}-.0713621{col 27}{space 2} .0336058{col 38}{space 1}   -2.12{col 47}{space 3}0.034{col 55}{space 4}-.1372949{col 68}{space 3}-.0054294
{txt}{space 1}year_born_T1 {c |}{col 15}{res}{space 2} -.001504{col 27}{space 2} .0003342{col 38}{space 1}   -4.50{col 47}{space 3}0.000{col 55}{space 4}-.0021597{col 68}{space 3}-.0008482
{txt}race_white_T1 {c |}{col 15}{res}{space 2}-.0105609{col 27}{space 2} .0285656{col 38}{space 1}   -0.37{col 47}{space 3}0.712{col 55}{space 4}-.0666051{col 68}{space 3} .0454832
{txt}{space 4}income_T1 {c |}{col 15}{res}{space 2} .0035114{col 27}{space 2} .0028921{col 38}{space 1}    1.21{col 47}{space 3}0.225{col 55}{space 4}-.0021627{col 68}{space 3} .0091856
{txt}{space 8}_cons {c |}{col 15}{res}{space 2} 3.035107{col 27}{space 2} .6591525{col 38}{space 1}    4.60{col 47}{space 3}0.000{col 55}{space 4} 1.741886{col 68}{space 3} 4.328327
{txt}{hline 14}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}.         *** little change from above 
.         *** some bias in attrition: female, white, year born
.         *** female = 0.029 (0.013) - significant at 5 percent level - women are more likely to not respond to all three 
.         *** white ethnicity = -0.071 (0.034) - significant at 5 percent level - Hispanics more likely to not respond to all three 
.         *** year born = -0.002 (0.0003) - significant at 1 percent level - older folks more likely to not respond to all three 
. 
. * include female, white Hispanic, white race, year born
.         reg             non_respon_food_sec female white year_born_T1 race_white_T1 

{txt}      Source {c |}       SS           df       MS      Number of obs   ={res}     1,227
{txt}{hline 13}{c +}{hline 34}   F(4, 1222)      = {res}     6.67
{txt}       Model {c |} {res} .846292435         4  .211573109   {txt}Prob > F        ={res}    0.0000
{txt}    Residual {c |} {res} 38.7836994     1,222  .031737888   {txt}R-squared       ={res}    0.0214
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}    0.0182
{txt}       Total {c |} {res} 39.6299919     1,226  .032324626   {txt}Root MSE        =   {res} .17815

{txt}{hline 14}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}non_respon_~c{col 15}{c |}      Coef.{col 27}   Std. Err.{col 39}      t{col 47}   P>|t|{col 55}     [95% Con{col 68}f. Interval]
{hline 14}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 7}female {c |}{col 15}{res}{space 2} .0276865{col 27}{space 2} .0129263{col 38}{space 1}    2.14{col 47}{space 3}0.032{col 55}{space 4} .0023264{col 68}{space 3} .0530467
{txt}{space 8}white {c |}{col 15}{res}{space 2}-.0618093{col 27}{space 2} .0316865{col 38}{space 1}   -1.95{col 47}{space 3}0.051{col 55}{space 4}-.1239753{col 68}{space 3} .0003567
{txt}{space 1}year_born_T1 {c |}{col 15}{res}{space 2}-.0014788{col 27}{space 2} .0003284{col 38}{space 1}   -4.50{col 47}{space 3}0.000{col 55}{space 4}-.0021231{col 68}{space 3}-.0008344
{txt}race_white_T1 {c |}{col 15}{res}{space 2}-.0065158{col 27}{space 2} .0273995{col 38}{space 1}   -0.24{col 47}{space 3}0.812{col 55}{space 4}-.0602711{col 68}{space 3} .0472394
{txt}{space 8}_cons {c |}{col 15}{res}{space 2} 2.987137{col 27}{space 2} .6475283{col 38}{space 1}    4.61{col 47}{space 3}0.000{col 55}{space 4} 1.716746{col 68}{space 3} 4.257527
{txt}{hline 14}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}.         *** little change from above (magnitude but not conclusion) 
.         *** some bias in attrition: female, white, year born
.         *** female = 0.028 (0.013) - significant at 5 percent level - women are more likely to not respond to all three 
.         *** white ethnicity = -0.062 (0.032) - significant at 10 (5.1) percent level - Hispanics more likely to not respond to all three 
.         *** year born = -0.001 (0.0003) - significant at 1 percent level - older folks more likely to not respond to all three 
. 
. * save again 
.         save            "C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_9July_wide.dta", replace
{txt}file C:\Users\aljosephson\Dropbox\COVID\UVM\UVM_9July_wide.dta saved

{com}. 
. * **********************************************************************
. * 3 - end matter
. * **********************************************************************
. 
. * save new datasets as appropriate 
. * should be saved above 
. 
. * close the log
.         log     close
      {txt}name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\aljosephson\Dropbox\COVID\UVM/9July_foodsecurity-log.smcl
  {txt}log type:  {res}smcl
 {txt}closed on:  {res} 9 Jul 2020, 11:54:52
{txt}{.-}
{smcl}
{txt}{sf}{ul off}